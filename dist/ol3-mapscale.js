ol.control.MapScale=function(a){a||(a={});var b=void 0!==a.className?a.className:"ol-map-scale",c=document.createElement("div");c.classList.add(b);var d=document.createElement("div");c.appendChild(d),this.scaleLine_=new ol.control.ScaleLine({target:d,className:"ol-map-scale-line"}),this.scaleValue_=document.createElement("div"),this.scaleValue_.classList.add(b+"-value"),c.appendChild(this.scaleValue_),this.viewState_=null;var e=void 0!==a.render?a.render:ol.control.MapScale.render;ol.control.Control.call(this,{element:c,render:e,target:a.target}),this.scaleLine_.on("change:units",this.handleUnitsChanged_,this)},ol.inherits(ol.control.MapScale,ol.control.Control),ol.control.MapScale.DOTS_PER_INCH=ol.control.MapScale.calcDPI()||96,ol.control.MapScale.INCHES_PER_METER=39.37,ol.control.MapScale.calcDPI=function(){if(document){var a,b=document.createElement("div");return b.style.width="1in",b.style.height="1in",b.style.position="fixed",b.style.left="-100%",document.body.appendChild(b),a=b.offsetWidth,document.body.removeChild(b),a}},ol.control.MapScale.render=function(a){var b=a.frameState;null==b?this.viewState_=null:this.viewState_=b.viewState,this.updateElement_()},ol.control.MapScale.prototype.handleUnitsChanged_=function(){this.updateElement_()},ol.control.MapScale.prototype.setMap=function(a){this.scaleLine_.setMap(a),ol.control.Control.prototype.setMap.call(this,a)},ol.control.MapScale.prototype.updateElement_=function(){var a,b,c,d,e,f=this.viewState_;f&&(a=f.center,b=f.resolution,c=f.projection,d=c.getMetersPerUnit()*c.getPointResolution(b,a),e=Math.round(d*ol.control.MapScale.DOTS_PER_INCH*ol.control.MapScale.INCHES_PER_METER),this.scaleValue_.innerHTML="1 : "+e)};