{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9f0507b7eb1c9020a975","webpack:///./src/index.js","webpack:///./src/MapScaleControl.js","webpack:///./src/util.js","webpack:///./src/control.scss","webpack:///external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}"],"names":["MapScaleControlOptions","DOTS_PER_INCH","INCHES_PER_METER","MapScaleControl","options","className","scaleLineClassName","scaleValueClassName","render","target","element","units_","units","digits_","digits","scaleValueElement_","appendChild","viewState_","undefined","scaleLine_","scaleLine","scaleLineElement","control","ScaleLine","on","handleUnitsChanged_","map","setMap","updateElement_","viewState","resolution","projection","pointResolution","getMetersPerUnit","scale","Math","round","innerHTML","mapEvent","frameState","Control","createElement","calculateDPI","formatNumber","tagName","classes","elem","document","classList","add","apply","split","inch","style","width","height","position","left","body","dpi","offsetWidth","removeChild","num","i","length","decimal","pow","parseFloat","toFixed"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"openlayers\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"openlayers\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MapScale\"] = factory(require(\"openlayers\"));\n\telse\n\t\troot[\"ol\"] = root[\"ol\"] || {}, root[\"ol\"][\"control\"] = root[\"ol\"][\"control\"] || {}, root[\"ol\"][\"control\"][\"MapScale\"] = factory(root[\"ol\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9f0507b7eb1c9020a975","/**\n * OpenLayers map scale control.\n * A map scale control with scale string.\n *\n * @author Vladimir Vershinin <ghettovoice@gmail.com>\n * @licence MIT https://opensource.org/licenses/MIT\n * @copyright (c) 2016-2017, Vladimir Vershinin\n */\nimport Control from './MapScaleControl';\nimport './control.scss';\n\nexport default Control;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","//@flow\nimport ol from \"openlayers\";\nimport { createElement, calculateDPI, formatNumber } from './util';\n\n/**\n * @typedef {Object} MapScaleControlOptions\n * @property {Element | string | undefined} target Specify a target if you want the control to be rendered outside of the map's viewport.\n * @property {string | string[] | undefined} className Custom class name of the control container element. Default is `ol-mapscale`.\n * @property {string | string[] | undefined} scaleLineClassName Custom class name of the scale line container element. Default is `ol-scale-line`.\n * @property {string | string[] | undefined} scaleValueClassName Custom class name of the scale value container element. Default is `ol-scale-value`.\n * @property {boolean | undefined} scaleLine Show/hide scale line control. Default is true.\n * @property {string[] | undefined} units Array of scale value units. Default is `['k', 'M', 'G']`.\n * @property {number | undefined} digits The number of digits to appear after the decimal point. Default is 0.\n */\nvar MapScaleControlOptions;\n\nconst DOTS_PER_INCH = 96;\nconst INCHES_PER_METER = 39.37;\n\n/**\n * MapScale control class.\n *\n * @class\n * @extends {ol.control.Control}\n * @author Vladimir Vershinin\n */\nexport default class MapScaleControl extends ol.control.Control {\n    /**\n     * @param {MapScaleControlOptions} options\n     */\n    constructor(options = {}) {\n        const className = options.className || 'ol-mapscale';\n        const scaleLineClassName = options.scaleLineClassName || \"ol-scale-line\";\n        const scaleValueClassName = options.scaleLineClassName || \"ol-scale-value\";\n        const render = MapScaleControl.render;\n        const target = options.target;\n\n        const element = createElement('div', className);\n\n        super({\n            element,\n            render,\n            target\n        });\n        /**\n         * @type {string[]}\n         * @private\n         */\n        this.units_ = options.units;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.digits_ = options.digits;\n        /**\n         * @type {Element}\n         * @private\n         */\n        this.scaleValueElement_ = createElement('div', scaleValueClassName);\n        element.appendChild(this.scaleValueElement_);\n\n        /**\n         * @private\n         * @type {olx.ViewState}\n         */\n        this.viewState_ = undefined;\n\n        /**\n         * @type {ol.control.ScaleLine}\n         * @protected\n         */\n        this.scaleLine_ = undefined;\n        if (options.scaleLine === undefined || options.scaleLine) {\n            const scaleLineElement = createElement('div', 'ol-scale-line-target');\n            element.appendChild(scaleLineElement);\n\n            this.scaleLine_ = new ol.control.ScaleLine({\n                target: scaleLineElement,\n                className: scaleLineClassName\n            });\n\n            this.scaleLine_.on(\"change:units\", ::this.handleUnitsChanged_);\n        }\n    }\n\n    /**\n     * @param {ol.MapEvent} mapEvent\n     * @this {MapScaleControl}\n     */\n    static render(mapEvent) {\n        const frameState = mapEvent.frameState;\n\n        if (frameState == null) {\n            this.viewState_ = null;\n        } else {\n            this.viewState_ = frameState.viewState;\n        }\n\n        this.updateElement_();\n    }\n\n    /**\n     * @param {ol.Map} map\n     */\n    setMap(map) {\n        this.scaleLine_ && this.scaleLine_.setMap(map);\n        super.setMap(map);\n    }\n\n    /**\n     * @private\n     */\n    handleUnitsChanged_() {\n        this.updateElement_();\n    }\n\n    /**\n     * @private\n     */\n    updateElement_() {\n        const viewState = this.viewState_;\n\n        if (viewState) {\n            const resolution = viewState.resolution;\n            const projection = viewState.projection;\n            const pointResolution = projection.getMetersPerUnit() * resolution;\n            const scale = Math.round(pointResolution * DOTS_PER_INCH * INCHES_PER_METER);\n\n            this.scaleValueElement_.innerHTML = \"1 : \" + formatNumber(scale, this.digits_, this.units_);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MapScaleControl.js","/**\n * @param {string} tagName\n * @param {string|string[]} [classes]\n * @returns {Element}\n */\nexport function createElement(tagName, classes) {\n    const elem = document.createElement(tagName);\n\n    if (classes) {\n        elem.classList.add.apply(elem.classList, typeof classes === 'string' ? classes.split(' ') : classes);\n    }\n\n    return elem;\n}\n\n/**\n * Calculates screen DPI based on css style.\n *\n * @returns {number|undefined}\n */\nexport function calculateDPI() {\n    if (!document) {\n        return;\n    }\n\n    const inch = document.createElement(\"div\");\n\n    inch.style.width = \"1in\";\n    inch.style.height = \"1in\";\n    inch.style.position = \"fixed\";\n    inch.style.left = \"-100%\";\n\n    document.body.appendChild(inch);\n\n    var dpi = inch.offsetWidth;\n    document.body.removeChild(inch);\n\n    return dpi;\n}\n\n/**\n * Formats number.\n *\n * @param {number} num\n * @param {number} digits\n * @param {string[]} units\n * @returns {string}\n */\nexport function formatNumber(num, digits = 0, units = ['k', 'M', 'G']) {\n    for (var i = units.length - 1; i >= 0; i--) {\n        const decimal = Math.pow(1000, i + 1);\n\n        if (num <= -decimal || num >= decimal) {\n            return parseFloat(num / decimal).toFixed(digits) + units[i];\n        }\n    }\n\n    return num;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/control.scss\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}