/**
OpenLayers3 map scale control
Version: 1.0.0
Homepage: https://github.com/ghettovoice/ol3-mapscale
*/
!function(a,b){"function"==typeof define&&define.amd?define(["openlayers"],b):"object"==typeof exports?module.exports=b(require("openlayers")):a.ol.control.MapScale=b(a.ol)}(this,function(a){return a.control.MapScale=function(){"use strict";function b(c){c||(c={});var d=void 0!==c.className?c.className:"ol-map-scale",e=document.createElement("div");e.classList.add(d);var f=document.createElement("div");e.appendChild(f),this.scaleLine_=new a.control.ScaleLine({target:f,className:"ol-map-scale-line"}),this.scaleValue_=document.createElement("div"),this.scaleValue_.classList.add(d+"-value"),e.appendChild(this.scaleValue_),this.viewState_=null;var g=void 0!==c.render?c.render:b.render;a.control.Control.call(this,{element:e,render:g,target:c.target}),this.scaleLine_.on("change:units",this.handleUnitsChanged_,this)}function c(){if(document){var a,b=document.createElement("div");return b.style.width="1in",b.style.height="1in",b.style.position="fixed",b.style.left="-100%",document.body.appendChild(b),a=b.offsetWidth,document.body.removeChild(b),a}}function d(a,b){for(var c,d=["k","M","G"],e=d.length-1;e>=0;e--)if(c=Math.pow(1e3,e+1),-c>=a||a>=c)return+(a/c).toFixed(b)+d[e];return a}return a.inherits(b,a.control.Control),b.render=function(a){var b=a.frameState;null==b?this.viewState_=null:this.viewState_=b.viewState,this.updateElement_()},b.DOTS_PER_INCH=c()||96,b.INCHES_PER_METER=39.37,b.prototype.handleUnitsChanged_=function(){this.updateElement_()},b.prototype.setMap=function(b){this.scaleLine_.setMap(b),a.control.Control.prototype.setMap.call(this,b)},b.prototype.updateElement_=function(){var a,c,e,f,g,h=this.viewState_;h&&(a=h.center,c=h.resolution,e=h.projection,f=e.getMetersPerUnit()*e.getPointResolution(c,a),g=Math.round(f*b.DOTS_PER_INCH*b.INCHES_PER_METER),this.scaleValue_.innerHTML="1 : "+d(g,1))},b}(),a.control.MapScale});