/**
OpenLayers3 map scale control
Version: 1.0.3
Homepage: https://github.com/ghettovoice/ol3-mapscale
*/
!function(a,b){"function"==typeof define&&define.amd?define(["openlayers"],b):"object"==typeof exports?module.exports=b(require("openlayers")):a.ol.control.MapScale=b(a.ol)}(this,function(a){return a.control.MapScale=function(){"use strict";function b(d){d||(d={}),b.DOTS_PER_INCH=c();var e=void 0!==d.className?d.className:"ol-map-scale",f=document.createElement("div");f.classList.add(e);var g=document.createElement("div");f.appendChild(g),this.scaleLine_=new a.control.ScaleLine({target:g,className:"ol-map-scale-line"}),this.scaleValue_=document.createElement("div"),this.scaleValue_.classList.add(e+"-value"),f.appendChild(this.scaleValue_),this.viewState_=null;var h=void 0!==d.render?d.render:b.render;a.control.Control.call(this,{element:f,render:h,target:d.target}),this.scaleLine_.on("change:units",this.handleUnitsChanged_,this)}function c(){if(document){var a,b=document.createElement("div");return b.style.width="1in",b.style.height="1in",b.style.position="fixed",b.style.left="-100%",document.body.appendChild(b),a=b.offsetWidth,document.body.removeChild(b),a}}function d(a,b){for(var c,d=["k","M","G"],e=d.length-1;e>=0;e--)if(c=Math.pow(1e3,e+1),-c>=a||a>=c)return+(a/c).toFixed(b||0)+d[e];return a}return a.inherits(b,a.control.Control),b.render=function(a){var b=a.frameState;null==b?this.viewState_=null:this.viewState_=b.viewState,this.updateElement_()},b.DOTS_PER_INCH=96,b.INCHES_PER_METER=39.37,b.prototype.handleUnitsChanged_=function(){this.updateElement_()},b.prototype.setMap=function(b){this.scaleLine_.setMap(b),a.control.Control.prototype.setMap.call(this,b)},b.prototype.updateElement_=function(){var a,c,e,f,g=this.viewState_;g&&(a=g.resolution,c=g.projection,e=c.getMetersPerUnit()*a,f=Math.round(e*b.DOTS_PER_INCH*b.INCHES_PER_METER),this.scaleValue_.innerHTML="1 : "+d(f))},b}(),a.control.MapScale});